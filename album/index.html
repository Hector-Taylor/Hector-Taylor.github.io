<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Album Â· Hector Taylor</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:opsz,wght@6..96,500;6..96,700&family=Space+Grotesk:wght@300;400&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        color-scheme: only light;
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        margin: 0;
        width: 100%;
        min-height: 100%;
      }

      body {
        font-family: 'Space Grotesk', sans-serif;
        background: #f6f3ed;
        color: #151515;
      }

      header {
        padding: clamp(24px, 5vw, 56px) clamp(20px, 6vw, 72px) 12px;
      }

      h1 {
        font-family: 'Bodoni Moda', serif;
        font-size: clamp(32px, 6vw, 72px);
        text-transform: uppercase;
        letter-spacing: 0.02em;
        margin: 0;
      }

      .subhead {
        text-transform: uppercase;
        letter-spacing: 0.26em;
        font-size: 12px;
        margin-top: 10px;
        color: #3d3d3d;
      }

      .back-link {
        display: inline-block;
        margin-top: 18px;
        text-decoration: none;
        text-transform: uppercase;
        letter-spacing: 0.24em;
        font-size: 11px;
        color: #151515;
        border-bottom: 1px solid rgba(21, 21, 21, 0.35);
        padding-bottom: 4px;
      }

      main {
        padding: 0 clamp(20px, 6vw, 72px) clamp(32px, 7vw, 80px);
      }

      .grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: clamp(16px, 3vw, 28px);
      }

      .card {
        background: #fff;
        border-radius: 18px;
        box-shadow: 0 18px 40px rgba(25, 25, 25, 0.08);
        overflow: hidden;
        display: flex;
        flex-direction: column;
      }

      .card img {
        width: 100%;
        height: 240px;
        object-fit: cover;
        display: block;
      }

      .card-body {
        padding: 16px 18px 20px;
      }

      .card-title {
        font-family: 'Bodoni Moda', serif;
        font-size: 20px;
        margin: 0 0 8px;
      }

      .card-meta {
        text-transform: uppercase;
        letter-spacing: 0.2em;
        font-size: 10px;
        color: #4a4a4a;
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }

      .card-notes {
        margin: 12px 0 0;
        font-size: 13px;
        color: #333;
        line-height: 1.5;
      }

      .empty {
        margin-top: 32px;
        text-transform: uppercase;
        letter-spacing: 0.2em;
        font-size: 12px;
        color: #5a5a5a;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Album</h1>
      <div class="subhead">Private archive</div>
      <a class="back-link" href="/">Back to home</a>
    </header>

    <main>
      <div class="grid" id="album-grid"></div>
      <div class="empty" id="album-empty" hidden>No photos yet.</div>
    </main>

    <script>
      const grid = document.getElementById('album-grid');
      const empty = document.getElementById('album-empty');

      const render = (items) => {
        const filtered = items.filter((item) => item && item.image);
        if (!filtered.length) {
          empty.hidden = false;
          return;
        }

        filtered.sort((a, b) => (b.date || '').localeCompare(a.date || ''));

        filtered.forEach((item) => {
          const card = document.createElement('article');
          card.className = 'card';

          const img = document.createElement('img');
          img.src = item.image;
          img.alt = item.title || 'Photo';
          img.loading = 'lazy';

          const body = document.createElement('div');
          body.className = 'card-body';

          if (item.title) {
            const title = document.createElement('h2');
            title.className = 'card-title';
            title.textContent = item.title;
            body.appendChild(title);
          }

          const metaParts = [item.location, item.date].filter(Boolean);
          if (metaParts.length) {
            const meta = document.createElement('div');
            meta.className = 'card-meta';
            metaParts.forEach((part) => {
              const span = document.createElement('span');
              span.textContent = part;
              meta.appendChild(span);
            });
            body.appendChild(meta);
          }

          if (item.notes) {
            const notes = document.createElement('p');
            notes.className = 'card-notes';
            notes.textContent = item.notes;
            body.appendChild(notes);
          }

          card.appendChild(img);
          card.appendChild(body);
          grid.appendChild(card);
        });
      };

      fetch('/content/photos.json', { cache: 'no-store' })
        .then((res) => {
          if (!res.ok) {
            throw new Error('Missing album data');
          }
          return res.json();
        })
        .then((data) => {
          render(data.items || []);
        })
        .catch(() => {
          empty.hidden = false;
          empty.textContent = 'Album data not found yet.';
        });
    </script>
  </body>
</html>
